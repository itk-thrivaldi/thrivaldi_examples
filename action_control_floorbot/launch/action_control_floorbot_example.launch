<?xml version="1.0" encoding="utf-8"?>
<launch>
  <!-- Arguments of the launch -->
  <arg name="sim" default="true"/>

  <!-- Load robotlab urdf -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find robotlab_support)/urdf/robotlab.xacro'" />

  <!-- Run robot_state_publisher
       The robot_state_publisher node is a node that takes the /joint_states and makes sure
       to publish the frames of the joints to tf. Without it, RVIZ and many other things
       may encounter problems. -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher"/>

  <!-- Load RVIZ -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find robotlab_support)/rviz/robotlab.rviz" />
  
  <!-- Robot interface streaming starts -->
  <group if="$(arg sim)">
    <include file="$(find robotlab_support)/launch/robot_interface_streaming_robotlab.launch">
      <arg name="sim_floor" value="true"/>
    </include>
  </group>
  <group unless="$(arg sim)">
    <include file="$(find robotlab_support)/launch/robot_interface_streaming_robotlab.launch">
      <arg name="rsi_floor" value="true"/>
    </include>
  </group>

  <!-- Spawn our rospy node -->
  <node name="floor_action_client" pkg="action_control_floorbot" type="action_control_floorbot_client.py" output="screen"/>
  
</launch>
